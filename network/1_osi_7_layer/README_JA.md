# 🔑 The 7 Layers of OSI

<br>

## 📌 Physical Layer

7階層中最下位の階層であり、主に電気的、機械的などの特性を利用してデータ伝送を行います。<br>
データは0、1であり（On、Off）、電気的信号状態で構成されています。<br>
電線を介して電磁気波を送り電気信号を送受信しますが、電線はすべての電磁気波を通過することができないため、データの損失が発生します。<br>
(周波数は 0~無限大の周波数範囲を持っていますので)<br>

送信者はこのような損失なくデータを送るためにはアナログ信号に変換して送信します（encoding）<br>
受信者はアナログ信号受信後、0と1で解析して使用します。（decoding）<br>

このように変換するモジュールは、PHYチップという名前でハードウェア的に作られています。

<br>

## 📌 Data Link Layer

説明に先立ち、複数台のコンピュータが通信するためには、ルータ（L3スイッチ）に複数台のコンピュータをつなぎ、これを一つのネットワークといいます。<br>
このように、ルータでつながった複数のネットワークを1つにつなぐとインターネットと呼ばれます。<br>

送信側では、特定のコンピュータとデータ送信をするためには、すぐに隣のネットワーク（ルータ）だけを考えます。<br>
そうなると、目的地（特定コンピュータ=特定IP）まで直近のネットワークを経由しながら通信が進むようになります。<br>

受信側では「01010101010」というデータが来ると、全部でいくつかのパソコンからデータが届き、それぞれのデータの始まりと終わりが分かりません。<br>
そのため、データの一番前に特定の数字を、最後に特定の数字を追加することで、データの始まりと終わりを特定してデータを正確に分類できます。<br>

整理しますと、直接連結された異なる2つのネットワーキング装置間のデータ送信を担当し、送信されるデータをframeといいます。<br>
この階層ではプロトコルの用途に応じてframeの種類や長さなどの情報を定義します。<br>
MACという媒体アクセス制御機能があり、48ビットのアドレスを持っています。<br>

最後に、この階層はLan cardであり、1階層と同様にハードウェア的に作られています。

<br>

## 📌 Network Layer

特定のコンピュータにデータを送るためにはIPアドレスを知る必要があります。<br>
データと対象コンピュータのIPアドレスなどの情報を、決められたルール通りに分割させて送信しますが、この単位をパケットといいます。<br>
このパケットは数多くのルータを経由しながら（routing）特定コンピュータにデータを伝送することになります。<br>

パケットの仕組みです。
1. バージョン: IPv4 vs IPv6
2. TTL(Time to Live):ネットワーク上に残る時間であり、ルータをなくすことでカウンターを減少させます。
3. Protocol: TCP vs UDP
4. パケット ヘッダー チェックサム: 重複検査の一形態で送信された資料の整合性を保護する方法であり、ヘッダーが破損していない場合はパケットが良好とみなします。
5. ソースアドレス:ネットワークに送信する装置のIP Addressです。
6. 対象アドレス:パケットが送信されるアドレス
7. データです。

整理すると、論理的アドレスをもとにパケットの送信経路を決定する役割を果たします。（routing）、<br>
データをパケット単位に分割して転送し、再結合させる役割を果たす。（パケットには論理アドレスが含まれています）

最後に、この階層はOSのカーネルにソフトウェア的に実装されています。

<br>

## 📌 Transport Layer

ネットワーク階層はパケットの転送を担当しますが、最適経路の探索、存在の有無、パケットの損傷等の問題を気にしません。<br>
パケットが受信コンピュータに正しく到着するよう、パケット転送を制御する役割は、転送階層が果たす。

データ転送のためにPort番号が使用されます。<br>
ポート番号は、一つのコンピュータで同時に実行されているプロセスが互いに重ならないように持つべき整数値を意味します。
送信者はデータを送る時、データを受信者のプロセスのPort番号を貼って送らなければなりません。<br>

整理すると、送信階層からはコンピュータ内にあるアプリケーションの送信を担当し、通信しようとするアプリケーション間に仮想連結通路を作り、接続を確立する作業です。<br>
ネットワーク階層はIP(コンピュータ)にデータを送るのであれば、伝送階層はPort 番号を使用してコンピュータの中の受信を受ける特定のアプリケーションを識別できるようにしてくれます。

最後に、この階層はOSのカーネルにソフトウェア的に実装されています。

[追加]

|Port|Protocol|
|---|---|
|22|SSH|
|80|HTTP|
|443|HTTPS|
|...|...|

<br>
<br>

---

📚 参考 : <br>
[https://www.youtube.com/watch?v=1pfTxp25MA8](https://www.youtube.com/watch?v=1pfTxp25MA8)
<br>
[https://jhnyang.tistory.com/373](https://jhnyang.tistory.com/373)
<br>
[https://reakwon.tistory.com/59](https://reakwon.tistory.com/59)
<br>
[https://enlqn1010.tistory.com/9](https://enlqn1010.tistory.com/9)
<br>
[https://better-together.tistory.com/134](https://better-together.tistory.com/134)